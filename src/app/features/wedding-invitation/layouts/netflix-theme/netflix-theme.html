<div class="netflix-container">

  <header class="hero-cover" [class.hidden]="!isCoverActive">
    <div class="hero-cover__background"
         [style.backgroundImage]="'url(' + getImageUrl(invitation.gallery[0]?.filename) + ')'">
    </div>
    <div class="hero-cover__content">
      <div class="hero-cover__title-group">
        <span class="hero-cover__the-wedding">THE WEDDING</span>
        <h1 class="hero-cover__couple-names">{{ invitation.groom_name }} & {{ invitation.bride_name }}</h1>
        <p class="hero-cover__date">{{ invitation.wedding_date | date:'EEEE, d MMMM y' }}</p>
      </div>

      <div class="mb-4">
        <app-countdown-timer [targetDate]="invitation.wedding_date"></app-countdown-timer>
      </div>

      @if (guest) {
        <div class="hero-cover__guest-container">
          <p class="hero-cover__guest-label">Kepada Yth:</p>
          <h2 class="hero-cover__guest-name">{{ formattedGuestName | titlecase }}</h2>
        </div>
      }

      <button class="hero-cover__button" (click)="openInvitation()">
        Open Invitation
      </button>
    </div>
  </header>

  <main class="netflix-content" [class.active]="isContentActive" #contentContainer>

    <div class="mini-header">
      <div class="mini-header__left">
        <a class="mini-header__logo" (click)="scrollToSection('home')">
          ARTELA
        </a>
        <ul class="mini-header__nav">
          <li><a (click)="scrollToSection('home')">Home</a></li>
          <li><a (click)="scrollToSection('bride-groom')">Couple</a></li>
          <li><a (click)="scrollToSection('gallery')">Gallery</a></li>
          <li><a (click)="scrollToSection('save-the-date')">Event</a></li>
          <li><a (click)="scrollToSection('rsvp')">RSVP</a></li>
        </ul>
      </div>
    </div>

    <section class="content-hero" id="home">
      <div class="content-hero__background-wrapper">
        @for (photo of invitation.gallery; track photo.id; let i = $index) {
          <div class="content-hero__background"
               [style.backgroundImage]="'url(' + getImageUrl(photo.filename) + ')'"
               [class.active]="i === currentBgIndex">
          </div>
        }
      </div>
      <div class="content-hero__details">
        <div class="content-hero__logo">N</div>
        <div class="content-hero__title">
          The Beginning of Forever: {{ invitation.groom_name }} & {{ invitation.bride_name }}
        </div>
        <div class="content-hero__meta">
          <span class="content-hero__match">98% Match</span>
          <span class="content-hero__rating">SU</span>
          <span>{{ invitation.wedding_date | date:'yyyy' }}</span>
          <span class="content-hero__hd">HD</span>
        </div>
        <p class="content-hero__description">
          "Setelah dipertemukan dalam situasi yang tepat, di mana keduanya telah siap untuk memulai hubungan bersama,
          tibalah mereka di awal perjalanan baru menuju pernikahan."
        </p>
        <div class="hero-buttons-container">
          <button class="hero-button hero-button--play" (click)="toggleMusic()">
            <span>{{ isMusicPlaying ? '‚è∏ Pause' : '‚ñ∂ Play Music' }}</span>
          </button>
          <button class="hero-button hero-button--info" (click)="scrollToSection('save-the-date')">
            <span>‚Ñπ More Info</span>
          </button>
        </div>
      </div>
    </section>

    <section class="content-section" id="breaking-news">
      <h2 class="content-section__title">Breaking News</h2>
      <div class="content-section__card">
        <img [src]="getImageUrl(invitation.gallery[1]?.filename || invitation.gallery[0]?.filename)"
             alt="Breaking News" class="content-section__image">
        <p class="content-section__text">
          Hai teman-teman tersayang! Dengan penuh sukacita, kami ingin membagikan kabar bahagia! ‚ù§Ô∏è
          <br><br>
          <span class="content-section__signature">{{ invitation.groom_name }} & {{ invitation.bride_name }}</span>
        </p>
      </div>
    </section>

    <section class="content-section" id="bride-groom">
      <h2 class="content-section__title">Bride & Groom</h2>
      <div class="content-section__grid">
        <div class="profile-card">
          <img [src]="invitation.bride_photo_url || 'assets/images/bride-placeholder.jpg'" alt="Bride" class="profile-card__image">
          <h3 class="profile-card__name">{{ invitation.bride_name }}</h3>
          <p class="profile-card__description">The Bride</p>
        </div>
        <div class="profile-card">
          <img [src]="invitation.groom_photo_url || 'assets/images/groom-placeholder.jpg'" alt="Groom" class="profile-card__image">
          <h3 class="profile-card__name">{{ invitation.groom_name }}</h3>
          <p class="profile-card__description">The Groom</p>
        </div>
      </div>
    </section>

    <section class="content-section" id="gallery">
      <h2 class="content-section__title">Our Gallery</h2>
      <div class="gallery-grid">
        @for (photo of invitation.gallery; track photo.id) {
          <img [src]="getImageUrl(photo.filename)" alt="Gallery" class="gallery-grid__item">
        }
      </div>
    </section>

    <section class="content-section" id="save-the-date">
      <h2 class="content-section__title">Save The Date</h2>

      <div style="margin-bottom: 20px;">
        <app-countdown-timer [targetDate]="invitation.wedding_date"></app-countdown-timer>
      </div>

      <div class="event-card">
        <div class="event-card__details">
          <span class="event-card__label">AKAD NIKAH</span>
          <p class="event-card__date">{{ invitation.wedding_date | date:'EEEE, dd MMMM y' }}</p>
          <p class="event-card__location">{{ invitation.akad_location }}</p>
          <a [href]="invitation.akad_map_url" target="_blank" class="event-card__map-link">üìç Google Maps</a>
        </div>
      </div>

      <div class="event-card" style="margin-top: 1rem;">
        <div class="event-card__details">
          <span class="event-card__label">RESEPSI</span>
          <p class="event-card__date">{{ invitation.wedding_date | date:'EEEE, dd MMMM y' }}</p>
          <p class="event-card__location">{{ invitation.reception_location }}</p>
          <a [href]="invitation.reception_map_url" target="_blank" class="event-card__map-link">üìç Google Maps</a>
        </div>
      </div>
    </section>

    <section class="content-section form-section" id="rsvp">
      <div class="form-wrapper">
        <h2 class="form-wrapper__title">Pesan buat kita</h2>
        <app-guestbook></app-guestbook>
      </div>
      <div class="form-wrapper">
        <h2 class="form-wrapper__title">Konfirmasi Kehadiran</h2>
        <app-rsvp-form></app-rsvp-form>
      </div>
    </section>

    <footer class="main-footer">
      <p>Thank you! ‚ù§Ô∏è</p>
      <p class="main-footer__credits">E-Invitation made by Artela</p>
    </footer>

  </main>

  @if (isContentActive) {
    <div class="music-control"
         (click)="toggleMusic()"
         [class.paused]="!isMusicPlaying"
         title="Play/Pause Music">
      <div class="music-control__cd">
        <span>üéµ</span>
      </div>
    </div>
  }

  @if (youtubeEmbedUrl && isMusicPlaying) {
    <div class="music-player-hidden">
      <iframe #youtubePlayer
              id="youtubePlayer"
              [src]="youtubeEmbedUrl"
              width="1" height="1"
              frameborder="0"
              allow="autoplay; encrypted-media"
              allowfullscreen>
      </iframe>
    </div>
  }

</div>
